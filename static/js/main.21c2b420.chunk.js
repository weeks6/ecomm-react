(this["webpackJsonpecomm-react"]=this["webpackJsonpecomm-react"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var a,n=c(1),r=c(24),s=c.n(r),i=(c(30),c(31),c(32),c(4)),o=c(2),l=c(3),d=(c(33),c.p+"static/media/logo_white.527fbf50.svg"),u=(c(34),c(16)),j=c(11),b=c.p+"static/media/book_cover_placeholder.c2afa870.png";!function(e){e[e.PLACED=0]="PLACED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.BEING_DELIVERED=2]="BEING_DELIVERED",e[e.DELIVERED=3]="DELIVERED",e[e.CLOSED=4]="CLOSED",e[e.CANCELED=5]="CANCELED"}(a||(a={}));for(var m={id:1,title:"\u041d\u043e\u0432\u0438\u043d\u043a\u0438"},_={id:2,title:"Halo"},f={id:3,title:"Mass Effect"},h=[{id:1,userId:1,content:"\u0422\u043e\u0447\u043d\u043e \u043d\u0435 \u043f\u0440\u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432 \u043d\u0430 \u043a\u043d\u0438\u0433\u0443 \u043e\u0442 \u043a\u0430\u043a\u043e\u0433\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0440\u0430\u043d\u0434\u043e\u043c\u0430 \u0438\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u0432",rating:4},{id:2,userId:2,content:"\u0422\u043e\u0447\u043d\u043e \u043d\u0435 \u043f\u0440\u043e\u043f\u043b\u0430\u0447\u0435\u043d\u043d\u044b\u0439 \u043e\u0442\u0437\u044b\u0432 \u043d\u0430 \u043a\u043d\u0438\u0433\u0443 \u043e\u0442 \u043a\u0430\u043a\u043e\u0433\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0440\u0430\u043d\u0434\u043e\u043c\u0430 \u0438\u0437 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u0432",rating:3}],O=[],v=1,p=0;p<5;p++)O.push({id:v,author:"\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438",cover:b,price:3421,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",description:"\u041e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u0441\u044f\u043a\u043e\u0439 \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043d\u0438\u0433\u0435,\n      \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0438\u043a\u0442\u043e \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0447\u0438\u0442\u0430\u0435\u0442, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0441\u0435 \u0433\u043e\u0432\u043e\u0440\u044f\u0442,\n      \u0447\u0442\u043e \u0441\u0443\u0434\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 \u043f\u043e \u043e\u0431\u043b\u043e\u0436\u043a\u0435 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u043a\u0443\u043f\u0430\u044e\u0442\n      \u043a\u043d\u0438\u0433\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437-\u0437\u0437\u0430 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u0438\u043b\u0438, \u0438\u043d\u043e\u0433\u0434\u0430, \u0430\u0432\u0442\u043e\u0440\u043e\u0432.",reviews:[2],category:m}),v+=1;for(var x=0;x<7;x++)O.push({id:v,author:"\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438",cover:b,price:5423,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",description:"\u041e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u0441\u044f\u043a\u043e\u0439 \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043d\u0438\u0433\u0435,\n      \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0438\u043a\u0442\u043e \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0447\u0438\u0442\u0430\u0435\u0442, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0441\u0435 \u0433\u043e\u0432\u043e\u0440\u044f\u0442,\n      \u0447\u0442\u043e \u0441\u0443\u0434\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 \u043f\u043e \u043e\u0431\u043b\u043e\u0436\u043a\u0435 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u043a\u0443\u043f\u0430\u044e\u0442\n      \u043a\u043d\u0438\u0433\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437-\u0437\u0437\u0430 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u0438\u043b\u0438, \u0438\u043d\u043e\u0433\u0434\u0430, \u0430\u0432\u0442\u043e\u0440\u043e\u0432.",reviews:[1,2],category:_}),v+=1;for(var N=0;N<7;N++)O.push({id:v,author:"\u0410\u0432\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438",cover:b,price:1233,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",description:"\u041e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u0441\u044f\u043a\u043e\u0439 \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u043a\u043d\u0438\u0433\u0435,\n      \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043d\u0438\u043a\u0442\u043e \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u0447\u0438\u0442\u0430\u0435\u0442, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0441\u0435 \u0433\u043e\u0432\u043e\u0440\u044f\u0442,\n      \u0447\u0442\u043e \u0441\u0443\u0434\u0438\u0442\u044c \u043a\u043d\u0438\u0433\u0443 \u043f\u043e \u043e\u0431\u043b\u043e\u0436\u043a\u0435 \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u043a\u0443\u043f\u0430\u044e\u0442\n      \u043a\u043d\u0438\u0433\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437-\u0437\u0437\u0430 \u043e\u0431\u043b\u043e\u0436\u0435\u043a \u0438\u043b\u0438, \u0438\u043d\u043e\u0433\u0434\u0430, \u0430\u0432\u0442\u043e\u0440\u043e\u0432.",reviews:[],category:f}),v+=1;var g=[{id:2,avatar:"https://sun9-75.userapi.com/impg/uzx-eTxFcXuMibL9Ifq4w0C3Wqk69GIBeIuRzQ/8G6Bu_OZeGY.jpg?size=941x1080&quality=96&sign=cf74479a82d41737dd44fd4beaf9f39f&type=album",cart:{content:[]},email:"bbruh@auwdwa",name:"bruhawdaw",orders:[{content:[O[0]],date:new Date(2021,5,30),status:a.BEING_DELIVERED},{content:[O[1],O[2]],date:new Date(2021,4,30),status:a.DELIVERED}],favourites:[],reviews:[]}],k=Object(j.a)((function(){return{books:O}})),E=Object(j.a)((function(e){return{user:null,setUser:function(t){return e((function(){return{user:t}}))}}})),w=Object(j.a)((function(){return{reviews:h}})),y=(Object(j.a)((function(e){return{recommendations:{}}})),Object(j.a)((function(){return{users:g}}))),A=Object(j.a)((function(e){return{cart:{content:[]},addItem:function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e((function(e){var a=e.cart.content.find((function(e){return e.book===t}));return a?(e.editItem(t.id,{book:t,amount:a.amount+c}),{cart:{content:e.cart.content}}):{cart:{content:[{book:t,amount:c}].concat(Object(u.a)(e.cart.content))}}}))},editItem:function(t,c){return e((function(e){var a=e.cart.content.findIndex((function(e){return e.book.id===t}));return{cart:{content:[].concat(Object(u.a)(e.cart.content.slice(0,a)),[{book:c.book,amount:c.amount}],Object(u.a)(e.cart.content.slice(a,e.cart.content.length-1)))}}}))},removeItem:function(t){return e((function(e){return{cart:{content:Object(u.a)(e.cart.content.filter((function(e){return e.book.id!==t})))}}}))}}})),I=c(0),D=function(e){var t=e.title,c=e.items;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("ul",{className:"menu-item",children:[Object(I.jsx)("h3",{className:"menu-item__heading",children:t}),c.map((function(e,t){return Object(I.jsx)("li",{className:"menu-item__link",children:Object(I.jsx)(i.b,{to:e.url,children:e.text})},t)}))]})})},C=function(e){var t=e.open,c=e.handleMenu,a=Object(n.useState)(t),r=Object(o.a)(a,2),s=r[0],i=r[1];Object(n.useEffect)((function(){i(t)}),[t]);var l=k((function(e){return new Set(e.books.map((function(e){return e.category})))})),d={title:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435",items:Array.from(l).map((function(e){return{text:e.title,url:"/category/".concat(e.id)}}))};return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("nav",{className:s?"catalog-menu catalog-menu_opened":"catalog-menu catalog-menu_closed",children:[Object(I.jsxs)("div",{className:"catalog-menu__container",children:[Object(I.jsx)("button",{className:"btn catalog-menu__close",onClick:function(){return c(!1)},children:Object(I.jsx)("span",{className:"material-icons",children:"close"})}),Object(I.jsx)("ul",{className:"catalog-menu__list container",children:Object(I.jsx)(D,{title:d.title,items:d.items})})]}),Object(I.jsx)("div",{className:"catalog-menu__overlay",onClick:function(){return c(!1)}})]})})};c(42);var S=function(e){var t=e.open,c=e.handlePopup,a=e.children,r=Object(n.useState)(t),s=Object(o.a)(r,2),i=s[0],l=s[1],d=function(e){c(e),l(e)};return Object(n.useEffect)((function(){d(t)}),[t]),Object(I.jsxs)("div",{className:i?"popup popup_opened":"popup",children:[Object(I.jsx)("div",{className:"popup__container",children:Object(I.jsxs)("div",{className:"popup__body",children:[Object(I.jsx)("button",{className:"btn popup__close",onClick:function(){return d(!1)},children:Object(I.jsx)("span",{className:"material-icons",children:"close"})}),a]})}),Object(I.jsx)("div",{className:"popup__overlay",onClick:function(){return d(!1)}})]})},R=c(12),L=c(13),M=(c(43),c(9)),B=c.n(M),G=c(18),F="actk",U=function(){var e=Object(G.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var n={id:1,avatar:"https://sun9-75.userapi.com/impg/uzx-eTxFcXuMibL9Ifq4w0C3Wqk69GIBeIuRzQ/8G6Bu_OZeGY.jpg?size=941x1080&quality=96&sign=cf74479a82d41737dd44fd4beaf9f39f&type=album",cart:{content:[{book:O[0],amount:3}]},email:t.email,name:t.email,orders:[{content:[O[0]],date:new Date("06/02/2021"),status:a.BEING_DELIVERED},{content:[O[1],O[2]],date:new Date("03/25/2021"),status:a.DELIVERED}],favourites:[],reviews:[]};setTimeout((function(){var t;t="bruh moment",localStorage.setItem(F,t),e(n)}),1e3)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var V=function(e){var t=e.handleSubmit,c=Object(n.useState)({email:{value:"",valid:!1,validityMessage:""},password:{value:"",valid:!1,validityMessage:""}}),a=Object(o.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(!1),b=Object(o.a)(j,2),m=b[0],_=b[1],f=E(),h=f.setUser,O=(f.user,A().addItem),v=function(e){s(Object(L.a)(Object(L.a)({},r),{},Object(R.a)({},e.target.name,{value:e.target.value,valid:e.target.validity.valid,validityMessage:e.target.validationMessage})))},p=Object(n.useRef)(null),x=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=setTimeout((function(){var e,t;u(!(!(null===(e=p.current)||void 0===e?void 0:e.validity.valid)||!(null===(t=x.current)||void 0===t?void 0:t.validity.valid)))}),300);return function(){clearTimeout(e)}}),[]),Object(I.jsx)("form",{onSubmit:function(e){e.preventDefault(),_(!0),U({email:r.email.value,password:r.password.value}).then((function(e){e&&(h({id:1,email:e.email,orders:e.orders,avatar:e.avatar,cart:e.cart,name:e.name,favourites:e.favourites,reviews:e.reviews}),e.cart.content.forEach((function(e){return O(e.book,e.amount)})),t(),_(!1))})).catch((function(e){return console.log(e)})),console.log(r)},onChange:function(e){u(r.email.valid&&r.password.valid)},className:"form",children:Object(I.jsxs)("div",{className:"form__container",children:[Object(I.jsx)("h3",{className:"form__title",children:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(I.jsxs)("div",{className:"form__field",children:[Object(I.jsx)("input",{type:"email",className:"form__field-input",name:"email",value:r.email.value,onChange:v,autoComplete:"off",required:!0,ref:p}),Object(I.jsx)("label",{className:r.email.value?"form__label form__label_raised":"form__label",htmlFor:"email",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(I.jsx)("span",{className:"form__field-bar"}),Object(I.jsx)("span",{className:"form__field-notice",title:r.email.validityMessage,children:r.email.validityMessage})]}),Object(I.jsxs)("div",{className:"form__field",children:[Object(I.jsx)("input",{type:"password",className:"form__field-input",name:"password",value:r.password.value,onChange:v,autoComplete:"off",required:!0,ref:x}),Object(I.jsx)("label",{className:r.password.value?"form__label form__label_raised":"form__label",htmlFor:"password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(I.jsx)("span",{className:"form__field-bar"}),Object(I.jsx)("span",{className:"form__field-notice",title:r.password.validityMessage,children:r.password.validityMessage})]}),Object(I.jsx)("button",{className:"\n            btn button__main\n            ".concat(!d&&"button__main_disabled","\n            ").concat(m&&"loading","\n          "),disabled:!d||m,type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})},T=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),s=Object(o.a)(r,2),u=s[0],j=s[1],b=E((function(e){return e.user})),m=A().cart,_=function(e){a(e)},f=function(e){j(e)},h=Object(l.f)();return Object(n.useEffect)((function(){a(!1)}),[h]),Object(I.jsxs)("header",{className:"header",children:[Object(I.jsxs)("div",{className:"header__container container",children:[Object(I.jsxs)("div",{className:"header-part",children:[Object(I.jsx)(i.b,{to:"/",children:Object(I.jsx)("img",{src:d,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Volu.",className:"header__logo"})}),Object(I.jsxs)("button",{className:"btn header__menu",tabIndex:1,onClick:function(){return _(!0)},children:[Object(I.jsx)("span",{className:"material-icons-two-tone header__menu-icon",children:"menu"}),"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"]})]}),Object(I.jsxs)("nav",{className:"header-part",children:[Object(I.jsx)(i.b,{to:"/order",className:"btn header__nav-btn",activeClassName:"header__nav-btn_active",children:Object(I.jsx)("span",{className:"material-icons",children:"local_shipping"})}),Object(I.jsxs)(i.b,{to:"/cart",className:"btn header__nav-btn",activeClassName:"header__nav-btn_active",children:[Object(I.jsx)("span",{className:"material-icons",children:"shopping_cart"}),m.content.length?Object(I.jsx)("span",{className:"header__cart-counter",children:m.content.length}):null]}),b?Object(I.jsx)(i.b,{to:"/profile",className:"btn header__profile-btn",activeClassName:"header__profile-btn_active",replace:!0,children:Object(I.jsx)("div",{className:"header__profile-img",style:{backgroundImage:"url('".concat(b.avatar,"')")}})}):Object(I.jsx)("button",{className:"btn header__nav-btn",onClick:"/profile"===h.pathname?function(){}:function(){return f(!0)},children:Object(I.jsx)("span",{className:"material-icons",children:"account_circle"})})]})]}),Object(I.jsx)(C,{open:c,handleMenu:_}),Object(I.jsx)(S,{open:u,handlePopup:f,children:Object(I.jsx)(V,{handleSubmit:function(){f(!1)}})})]})},P=(c(44),c.p+"static/media/banner_large.9ebb847c.png"),Y=c.p+"static/media/banner.6d96d026.png",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYAgMAAADxH4duAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURQAAAPn5/ff5/fj6/UUGZiYAAAADdFJOUwB/gL9pIscAAAAoSURBVHjaY2CgF2hAYj9AYv9gYOD/DwX/kNh/kdR8QWJfQGI70NzVAJaEFmYcRzFtAAAAAElFTkSuQmCC",q=function(e){var t=e.id,c=e.title,a=e.author,n=e.price,r=e.cover,s=A(),o=(s.cart,s.addItem),l=k((function(e){return e.books.find((function(e){return e.id===t}))}));return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("article",{className:"product-card",children:Object(I.jsxs)("div",{className:"product-card__body",children:[Object(I.jsx)(i.b,{to:"/book/"+t,children:Object(I.jsx)("img",{src:r,alt:"",className:"product-card__image"})}),Object(I.jsxs)("div",{className:"product-card__info",children:[Object(I.jsx)("h3",{className:"product-card__title",children:c}),Object(I.jsx)("span",{className:"product-card__author",children:a})]}),Object(I.jsxs)("div",{className:"product-card__footer",children:[Object(I.jsx)("button",{className:"btn product-card__cart",onClick:function(){l&&o(l,1)},children:Object(I.jsx)("span",{className:"material-icons",children:"shopping_cart"})}),Object(I.jsx)("button",{className:"btn product-card__more",children:Object(I.jsx)("span",{className:"material-icons",children:"more_horiz"})}),Object(I.jsx)("span",{className:"product-card__price",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(n)})]})]})})})},Q=function(e){var t=e.id,c=e.title,a=e.books;return Object(I.jsxs)("section",{className:"products container",children:[Object(I.jsx)("h2",{className:"products__heading",children:Object(I.jsxs)(i.b,{to:"/category/"+t,className:"products__link",children:[c,Object(I.jsx)("span",{className:"material-icons",children:"arrow_forward"})]})}),Object(I.jsx)("ul",{className:"products__list",children:a.map((function(e,t){return Object(I.jsx)("li",{className:"products__list-item",children:Object(I.jsx)(q,{id:e.id,title:e.title,author:e.author,price:e.price,cover:e.cover})},e.id)}))})]})};var X=function(){var e=k((function(e){return new Set(e.books.map((function(e){return e.category})))}));return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("section",{className:"promo container",children:Object(I.jsxs)("ul",{className:"promo-banners",children:[Object(I.jsxs)("li",{className:"promo-banner promo-banner_large",children:[Object(I.jsx)("h1",{className:"promo__heading",children:"20 \u043b\u0435\u0442 \u0441\u0435\u0440\u0438\u0438 Halo"}),Object(I.jsxs)(i.b,{to:"/category/"+_.id,className:"promo__link",children:["\u041a\u0430\u0442\u0430\u043b\u043e\u0433",Object(I.jsx)("img",{src:z,className:"promo__link-icon",alt:""})]}),Object(I.jsx)("img",{src:P,alt:"",className:"promo-banner__img"})]}),Object(I.jsxs)("li",{className:"promo-banner",children:[Object(I.jsx)("h1",{className:"promo__heading",children:"Mass Effect \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f"}),Object(I.jsxs)(i.b,{to:"/category/"+f.id,className:"promo__link",children:["\u041a\u0430\u0442\u0430\u043b\u043e\u0433",Object(I.jsx)("img",{src:z,className:"promo__link-icon",alt:""})]}),Object(I.jsx)("img",{src:Y,alt:"",className:"promo-banner__img"})]}),Object(I.jsxs)("li",{className:"promo-banner",children:[Object(I.jsx)("h1",{className:"promo__heading",children:"Mass Effect \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f"}),Object(I.jsxs)(i.b,{to:"/category/"+f.id,className:"promo__link",children:["\u041a\u0430\u0442\u0430\u043b\u043e\u0433",Object(I.jsx)("img",{src:z,className:"promo__link-icon",alt:""})]}),Object(I.jsx)("img",{src:Y,alt:"",className:"promo-banner__img"})]})]})}),Array.from(e).map((function(e){var t=k((function(t){return t.books.filter((function(t){return t.category.id===e.id}))}));return Object(I.jsx)(Q,{id:e.id,title:e.title,books:t},e.id)}))]})};var H=function(){return Object(I.jsx)("div",{children:"Fuck you"})};var J=function(){var e=Object(l.g)().id,t=k((function(t){return t.books.filter((function(t){return t.category.id===parseInt(e)}))})),c=t[0];return t?Object(I.jsx)(Q,{id:parseInt(e),title:c.category.title,books:t}):Object(I.jsx)(H,{})};c(45);var W=function(e){var t=e.rating;return Object(I.jsxs)("div",{children:[t,"/5"]})};var Z=function(e){var t=e.id,c=w((function(e){return e.reviews.filter((function(e){return e.id===t}))}))[0],a=y((function(e){return e.users.filter((function(e){return e.id===c.userId}))}))[0];return Object(I.jsxs)("div",{className:"review-card",children:[Object(I.jsxs)("div",{className:"review-card__header",children:[Object(I.jsx)("img",{src:null===a||void 0===a?void 0:a.avatar,alt:"",className:"review-card__user-avatar"}),Object(I.jsxs)("div",{className:"review-card__user",children:[Object(I.jsx)("h4",{className:"review-card__user-name",children:(null===a||void 0===a?void 0:a.name)?null===a||void 0===a?void 0:a.name:"\u0410\u043d\u043e\u043d\u0438\u043c"}),Object(I.jsx)(W,{rating:c.rating})]})]}),Object(I.jsx)("p",{className:"review-card__body",children:c.content})]})};var K=function(e){var t=e.reviews;return Object(I.jsx)("section",{className:"reviews",children:Object(I.jsx)("div",{className:"reviews__container",children:t.length?t.map((function(e){return Object(I.jsx)(Z,{id:e},e)})):Object(I.jsx)("div",{className:"reviews__container_empty",children:Object(I.jsx)("span",{className:"reviews__messsage",children:"\u041d\u0430 \u044d\u0442\u0443 \u043a\u043d\u0438\u0433\u0443 \u0435\u0449\u0435 \u043d\u0435\u0442 \u043e\u0442\u0437\u044b\u0432\u043e\u0432 :("})})})})};var $=function(e){return e.title,e.recommends,Object(I.jsx)("div",{className:""})};var ee=function(){var e=Object(l.g)().id,t=A().addItem,c=k((function(t){return t.books.filter((function(t){return t.id===parseInt(e)}))}))[0],a=k((function(e){return e.books.filter((function(e){return e.category.id===c.category.id&&e.id!==c.id}))}));return Object(I.jsxs)("section",{className:"book-page container",children:[Object(I.jsxs)("div",{className:"book__container",children:[Object(I.jsx)("div",{className:"book__image-container",children:Object(I.jsx)("img",{src:c.cover,alt:"",className:"book__image"})}),Object(I.jsxs)("div",{className:"book__content",children:[Object(I.jsx)("h2",{className:"book__title",children:c.title}),Object(I.jsx)("span",{className:"book__author",children:c.author}),Object(I.jsx)("p",{className:"book__description",children:c.description}),Object(I.jsxs)(i.b,{to:"/category/"+c.category.id,className:"book__link book__link_more",children:[Object(I.jsx)("span",{className:"book__link-text",children:"\u0411\u043e\u043b\u044c\u0448\u0435 \u043f\u043e \u0432\u0441\u0435\u043b\u0435\u043d\u043d\u043e\u0439"}),Object(I.jsx)("span",{className:"material-icons book__link-icon",children:"arrow_forward"})]}),Object(I.jsx)("span",{className:"book__price",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(c.price)}),Object(I.jsxs)("div",{className:"book__actions",children:[Object(I.jsxs)("button",{className:"btn book__cta book__cta_cart",onClick:function(){t(c,1)},children:[Object(I.jsx)("span",{className:"book__cta-text",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}),Object(I.jsx)("span",{className:"material-icons book__cta-icon",children:"shopping_cart"})]}),Object(I.jsx)("button",{className:"btn book__cta book__cta_fav",children:Object(I.jsx)("span",{className:"material-icons book__cta-icon",children:"auto_awesome"})})]})]})]}),Object(I.jsx)($,{title:"\u041f\u043e\u0445\u043e\u0436\u0438\u0435",recommends:a}),Object(I.jsx)(K,{reviews:c.reviews})]})};c(46);var te=function(e){var t=e.book,c=e.amount,a=e.onAmountChange;return Object(I.jsxs)("div",{className:"cart-card",children:[Object(I.jsx)("img",{src:t.cover,alt:"",className:"cart-card__image"}),Object(I.jsxs)("div",{className:"cart-card__content",children:[Object(I.jsxs)("div",{className:"cart-card__content-inner",children:[Object(I.jsx)("h2",{className:"cart-card__title",children:t.title}),Object(I.jsx)("span",{className:"cart-card__author",children:t.author})]}),Object(I.jsx)("span",{className:"cart-card__price",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t.price*c)}),Object(I.jsxs)("div",{className:"cart-card__amount",children:[Object(I.jsx)("button",{className:"btn cart-card__btn",onClick:function(){return a(t.id,{book:t,amount:c-1})},children:Object(I.jsx)("span",{className:"material-icons cart-card__btn_icon",children:"remove"})}),Object(I.jsx)("span",{className:"cart-card__amount-value",children:c}),Object(I.jsx)("button",{className:"btn cart-card__btn",onClick:function(){return a(t.id,{book:t,amount:c+1})},children:Object(I.jsx)("span",{className:"material-icons cart-card__btn_icon",children:"add"})})]})]})]})};var ce=function(){var e=A(),t=e.cart,c=e.editItem,a=e.removeItem,n=(e.addItem,function(e,t){t.amount<1?a(e):c(e,t)});return Object(I.jsxs)("section",{className:"cart-page container",children:[Object(I.jsx)("h1",{className:"cart-page__title heading",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(I.jsx)("ul",{className:"cart-page__content",children:t.content.map((function(e){return Object(I.jsx)(te,{onAmountChange:n,amount:e.amount,book:e.book},e.book.id)}))})]})};c(47);var ae=function(e){var t=e.img,c=e.title,a=e.subTitle,n=e.price,r=e.amount,s=e.titleAdditional;return Object(I.jsxs)("div",{className:"order-card",children:[Object(I.jsx)("img",{src:t,alt:"",className:"order-card__image"}),Object(I.jsxs)("div",{className:"order-card__content",children:[Object(I.jsxs)("div",{className:"order-card__content-part",children:[Object(I.jsx)("h2",{className:"order-card__title",children:c}),Object(I.jsx)("span",{className:"order-card__title-add",children:s})]}),Object(I.jsx)("div",{className:"order-card__content-part",children:Object(I.jsx)("span",{className:"order-card__subtitle",children:a})})]}),Object(I.jsxs)("div",{className:"order-card__content order-card__right",children:[Object(I.jsx)("span",{className:"order-card__price",children:new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(n)}),Object(I.jsxs)("span",{className:"order-card__title-add",children:[r," \u0448\u0442."]})]})]})},ne=["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0440\u0432\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],re=function(e){return ne[e]};function se(e){var t={status:-1,text:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"};switch(e){case a.BEING_DELIVERED:t.status=a.BEING_DELIVERED,t.text="\u0415\u0434\u0435\u0442 \u043a \u0432\u0430\u043c";break;case a.CANCELED:t.status=a.CANCELED,t.text="\u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043c\u0435\u043d\u0451\u043d";break;case a.CLOSED:t.status=a.CLOSED,t.text="\u0417\u0430\u043a\u0440\u044b\u0442";break;case a.DELIVERED:t.status=a.DELIVERED,t.text="\u0414\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d";break;case a.IN_PROGRESS:t.status=a.IN_PROGRESS,t.text="\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f";break;case a.PLACED:t.status=a.PLACED,t.text="\u0416\u0434\u0451\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438"}return t}var ie=function(){var e=E().user;return console.log(null===e||void 0===e?void 0:e.orders),e?Object(I.jsxs)("section",{className:"container profile__page",children:[Object(I.jsxs)("div",{className:"profile__header",children:[Object(I.jsx)("h1",{className:"profile__title heading",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(I.jsx)("button",{className:"btn profile__edit",children:Object(I.jsx)("span",{className:"material-icons",children:"edit"})})]}),Object(I.jsx)("ul",{className:"order__list",children:Array.from(e.orders).map((function(e,t){return Object(I.jsx)("li",{className:"order__item",children:Object(I.jsx)(ae,{img:e.content[0].cover,amount:e.content.length,price:e.content.reduce((function(e,t){return e+t.price}),0),subTitle:se(e.status).text,title:e.status===a.DELIVERED?"".concat(e.date.getDay()," ").concat(re(e.date.getMonth())):"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437",titleAdditional:e.status===a.DELIVERED?"":"".concat(e.date.getDay()," ").concat(re(e.date.getMonth()))})},t)}))})]}):Object(I.jsx)("section",{className:"container",children:Object(I.jsx)(V,{handleSubmit:function(){}})})};c(48);var oe=function(){return Object(I.jsx)("div",{children:"Order"})},le=function(){return Object(I.jsx)("main",{className:"main",children:Object(I.jsxs)(l.c,{children:[Object(I.jsx)(l.a,{exact:!0,path:"/",children:Object(I.jsx)(X,{})}),Object(I.jsx)(l.a,{path:"/order",children:Object(I.jsx)(oe,{})}),Object(I.jsx)(l.a,{path:"/cart",children:Object(I.jsx)(ce,{})}),Object(I.jsx)(l.a,{path:"/profile",children:Object(I.jsx)(ie,{})}),Object(I.jsx)(l.a,{path:"/category/:id",children:Object(I.jsx)(J,{})}),Object(I.jsx)(l.a,{path:"/book/:id",children:Object(I.jsx)(ee,{})})]})})};var de=function(){var e=Object(n.useState)({scrollX:window.scrollX,scrollY:window.scrollY}),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){var e=function(){a({scrollX:window.scrollX,scrollY:window.scrollY})},t=function(e){var t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=[],n=function(){return new Promise((function(n,r){void 0!==t&&clearTimeout(t),t=setTimeout(e,c),a.push({resolve:n,reject:r})}))};return n.cancel=function(e){void 0!==t&&clearTimeout(t),a.forEach((function(t){return(0,t.reject)(e)})),a=[]},n}(e,200);return window.addEventListener("scroll",t),e(),function(){t.cancel(),window.removeEventListener("resize",t)}}),[]),c};c(49);var ue=function(e){var t=e.icon,c=e.onClick,a=e.className;return Object(I.jsx)("button",{className:"btn fab ".concat(a),onClick:c,children:Object(I.jsx)("span",{className:"material-icons",children:t})})};var je=function(){var e=de();Object(n.useEffect)((function(){r(e.scrollY>700)}),[e]);var t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],r=c[1];return Object(I.jsx)(ue,{icon:"expand_less",className:"".concat(a?"":"fab_hidden"),onClick:function(){window.scrollTo({behavior:"smooth",top:0})}})};c(50),c(51);function be(e){var t=e.handleSubmit,c=Object(n.useState)({email:{value:"",valid:!1,validityMessage:""}}),a=Object(o.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(!1),b=Object(o.a)(j,2),m=b[0],_=b[1],f=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=setTimeout((function(){var e;u(!!(null===(e=f.current)||void 0===e?void 0:e.validity.valid))}),300);return function(){clearTimeout(e)}}),[]),Object(I.jsx)("form",{onSubmit:function(e){e.preventDefault(),_(!0),setTimeout((function(){localStorage.setItem("subbed","true"),t(!0),_(!1)}),1e3)},onChange:function(e){u(r.email.valid)},className:"form letter",children:Object(I.jsxs)("div",{className:"form__container",children:[Object(I.jsx)("h3",{className:"form__title",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443"}),Object(I.jsxs)("div",{className:"form__field",children:[Object(I.jsx)("input",{type:"email",className:"form__field-input",name:"email",value:r.email.value,onChange:function(e){s(Object(L.a)(Object(L.a)({},r),{},Object(R.a)({},e.target.name,{value:e.target.value,valid:e.target.validity.valid,validityMessage:e.target.validationMessage})))},autoComplete:"off",required:!0,ref:f}),Object(I.jsx)("label",{className:r.email.value?"form__label form__label_raised":"form__label",htmlFor:"email",children:"\u041f\u043e\u0447\u0442\u0430"}),Object(I.jsx)("span",{className:"form__field-bar"}),Object(I.jsx)("span",{className:"form__field-notice",title:r.email.validityMessage,children:r.email.validityMessage})]}),Object(I.jsx)("button",{className:"\n            btn button__main\n            ".concat(!d&&"button__main_disabled","\n            ").concat(m&&"loading","\n          "),disabled:!d||m,type:"submit",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})]})})}var me=function(){var e=function(){return!!localStorage.getItem("subbed")},t=Object(n.useState)(e()),c=Object(o.a)(t,2),a=c[0],r=c[1];return Object(I.jsx)("footer",{className:"footer ",children:Object(I.jsxs)("div",{className:"footer__container container",children:[Object(I.jsxs)("div",{className:"footer__info",children:[Object(I.jsxs)("a",{href:"https://github.com/weeks6",className:"copyright",children:["\xa9 2021 Igor Ilin"," "]}),Object(I.jsxs)("div",{className:"footer__message",children:[Object(I.jsx)("span",{children:"\u041f\u0440\u043e\u0435\u043a\u0442 \u0434\u043b\u044f \u043a\u043e\u043b\u043b\u0435\u0434\u0436\u0430."}),Object(I.jsx)("span",{children:"\u042f \u0437\u043d\u0430\u044e \u0447\u0442\u043e \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 e com \u043d\u0435 \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u043a\u043b\u0438\u0435\u043d\u0442\u0435, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e SEO"}),Object(I.jsx)("span",{children:"Don't @ me"})]})]}),e()&&a?null:Object(I.jsx)(be,{handleSubmit:function(e){r(e)}})]})})};function _e(){return Object(I.jsx)("div",{className:"app-container",children:Object(I.jsxs)(i.a,{children:[Object(I.jsx)(T,{}),Object(I.jsx)(le,{}),Object(I.jsx)(je,{}),Object(I.jsx)(me,{})]})})}var fe=document.getElementById("root");s.a.render(Object(I.jsx)(n.StrictMode,{children:Object(I.jsx)(_e,{})}),fe)}},[[52,1,2]]]);
//# sourceMappingURL=main.21c2b420.chunk.js.map